<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.onload=function() {
            var memoTxt = document.getElementById('memoTxt');
            
            var demo = document.querySelector('#demo');
            var clickBtn = document.querySelector('#clickBtn');
            var resetBtn = document.querySelector('#resetBtn');  


            // 자바스크립트는 변수에 함수를 참조 시킬 수 있다.
            // 함수는 재활용할 수 있다.
            // handleEvent라는 이벤트 변수에 함수 기능을 넣은 것이다.
            // 그러면 재활용 시킬 때 handleEvent(); 라고 호출하면 된다는 것이다.
            var handleEvent = function(event) {
                // console.dir(event);
                // 코드를 함축적으로 만들어보자. 지저분하니까.
                // var memoTxtVal = memoTxt.value;
                // demo.innerHTML = memoTxtVal;
                // => demo.innerHTML = memoTxt.value;
                demo.innerHTML += '<br>' + memoTxt.value;
                memoTxt.value = "";
                memoTxt.focus();
            }
            clickBtn.addEventListener('click', handleEvent);

            // <의사코드>

            // 이벤트 핸들러 만들고 데이터 가져오고 가공하고 초기화시키기

            // Enter키를 누르면 메모를 텍스트로 변경하기.
            // 1. memoTxt input에 키 이벤트 핸들러 발생
            // 이벤트 핸들러 속성은 on으로 시작한다.
            // 이벤트 핸들러에서 on을 빼면 이벤트 핸들러 이름이 된다.
            
            /*
            element.onkeyup = function(event) {}
            또는 다음과 같이 사용 가능하다.
            onXxx에서 on 접두사를 빼고 이벤트 이름만 사용가능하다는 뜻이다.
            element.addEventListener('keyup', function(event) {....})
            */
            
           // 2. Enter 키인지 확인
           // 3. Enter 키라면 데이터 처리

            memoTxt.onkeyup = function(event) {
                // function 함수에서는 this가 이벤트가 발생한 객체이다.
                // 화살표 함수 X 즉 일반 함수에서 this를 사용하는 이유에 대해서 알아보자.
                // console.log(memoTxt == this);
                // console.log(memoTxt.value);
                // 이벤트 핸들러 안에서 event 객체는 자동 생성된다.
                // 그러나 event 매개변수를 직접 선언하는 것이 안전하다.
                // console.log(event.target.value);
                // console.dir(event.keyCode);
                if(event.keyCode === 13) {
                    // == 대충 비슷한거 === 타입까지 완전히 똑같은거
                    // 55 == '55'(''문자열) true 대충 비슷하다.
                    // 55 === '55' false 숫자와 문자열의 차이가 있어서 완전히 같지 않다.
                    // 이벤트 핸들러 함수를 호출한다.
                    // handleEvent 함수를 호출할 때도 이벤트를 넣어주면 동일하게 작동하게 된다.
                    handleEvent(event);

                }
            }
            
            
        }

    </script>
</head>
<body>
    메모: <input type="text" id="memoTxt" value="안녕 세계">
    <p id="demo">JavaScript can change HTML content.</p>

    <!-- 인라인 적용 방식 -->
    <button type="button" id="clickBtn" class="btn">Click</button>
    <button type="button" id="resetBtn">Reset</button>

</body>
</html>